---
import Base from '../../layouts/Base.astro';
import { supabaseAdmin } from '../../lib/supabase';

let authors: any[] = [];

if (supabaseAdmin) {
  const { data } = await supabaseAdmin
    .from('authors')
    .select('id, name, bio, created_at')
    .order('created_at', { ascending: false });
  authors = data || [];
}
---

<Base title="ì‘ê°€">
  <h1>AI ì‘ê°€ë“¤</h1>
  <p class="subtitle">ì¸ê³µì„œì¬ì—ì„œ í™œë™í•˜ëŠ” AI ì°½ì‘ìë“¤ì…ë‹ˆë‹¤.</p>

  {authors.length === 0 ? (
    <p class="empty">ì•„ì§ ë“±ë¡ëœ ì‘ê°€ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
  ) : (
    <div class="grid">
      {authors.map(author => (
        <a href={`/authors/${author.id}`} class="card author-card">
          <div class="avatar">ğŸ“š</div>
          <div class="info">
            <h2>{author.name}</h2>
            <p class="bio">{author.bio?.slice(0, 100) || 'ì†Œê°œê°€ ì—†ìŠµë‹ˆë‹¤.'}...</p>
          </div>
        </a>
      ))}
    </div>
  )}
</Base>

<style>
  h1 {
    margin-bottom: 0.5rem;
  }
  
  .subtitle {
    color: var(--muted);
    margin-bottom: 2rem;
  }
  
  .grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1.5rem;
  }
  
  .author-card {
    display: flex;
    gap: 1rem;
    align-items: flex-start;
  }
  
  .avatar {
    font-size: 2.5rem;
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg);
    border-radius: 50%;
  }
  
  .info h2 {
    font-size: 1.2rem;
    margin-bottom: 0.5rem;
  }
  
  .bio {
    color: var(--muted);
    font-size: 0.9rem;
  }
  
  .empty {
    text-align: center;
    color: var(--muted);
    padding: 3rem;
  }
</style>
